{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    products: [],\n    product: null,\n    uniqueCategories: [],\n    productCategoriesTitle: [],\n    cart: []\n  },\n  getters: {\n    getCategory: state => category => {\n      return state.products.filter(product => product.category === category);\n    },\n\n    specialProduct(state) {\n      return state.products.filter(product => product.special);\n    },\n\n    totalPrice(state) {\n      return state.cart.reduce((count, curItem) => {\n        return count + curItem.quantity * curItem.price;\n      }, 0);\n    }\n\n  },\n  mutations: {\n    setProducts(state, products) {\n      state.products = products;\n    },\n\n    setProduct(state, product) {\n      state.product = product;\n    },\n\n    setCart(state, cart) {\n      const cartItemIndex = state.cart.findIndex(item => item.id === cart.id);\n\n      if (cartItemIndex < 0) {\n        state.cart.push({ ...cart,\n          quantity: 1\n        });\n      } else {\n        if (state.cart[cartItemIndex].quantity === 10) return 0;\n        state.cart[cartItemIndex].quantity++;\n      }\n\n      localStorage.setItem('cart', JSON.stringify(state.cart));\n    },\n\n    incrementCartItemQuantity(state, id) {\n      const cartItemIndex = state.cart.findIndex(item => item.id === id);\n      if (state.cart[cartItemIndex].quantity === 10) return 0;\n      state.cart[cartItemIndex].quantity++;\n    },\n\n    decrementCartItemQuantity(state, id) {\n      const cartItemIndex = state.cart.findIndex(item => item.id === id);\n      if (state.cart[cartItemIndex].quantity === 1) return 0;\n      state.cart[cartItemIndex].quantity--;\n    },\n\n    removeCartProductItem(state, id) {\n      state.cart = state.cart.filter(product => product.id !== id);\n      localStorage.removeItem('cart');\n    },\n\n    initializeCart(state) {\n      // بازیابی اطلاعات سبد خرید از local storage در ابتدای بارگیری برنامه (اختیاری)\n      const savedCart = localStorage.getItem('cart');\n\n      if (savedCart) {\n        state.cart = JSON.parse(savedCart);\n      }\n    },\n\n    uniqueCategory: state => {\n      state.products.filter(element => {\n        const isDuplicate = state.uniqueCategories.includes(element.category);\n\n        if (!isDuplicate) {\n          state.uniqueCategories.push(element.category);\n          return true;\n        }\n\n        return false;\n      });\n    }\n  },\n  actions: {\n    async getProducts({\n      commit\n    }) {\n      const data = await fetch('http://localhost:3000/products');\n      let products = await data.json();\n      commit('setProducts', products);\n    },\n\n    async getProduct({\n      commit\n    }, id) {\n      const data = await fetch(`http://localhost:3000/products/${id}`);\n      let product = await data.json();\n      commit(\"setProduct\", product);\n    },\n\n    initializeCart({\n      commit\n    }) {\n      commit('initializeCart');\n    }\n\n  },\n  modules: {}\n});","map":{"version":3,"names":["Vue","Vuex","use","Store","state","products","product","uniqueCategories","productCategoriesTitle","cart","getters","getCategory","category","filter","specialProduct","special","totalPrice","reduce","count","curItem","quantity","price","mutations","setProducts","setProduct","setCart","cartItemIndex","findIndex","item","id","push","localStorage","setItem","JSON","stringify","incrementCartItemQuantity","decrementCartItemQuantity","removeCartProductItem","removeItem","initializeCart","savedCart","getItem","parse","uniqueCategory","element","isDuplicate","includes","actions","getProducts","commit","data","fetch","json","getProduct","modules"],"sources":["E:/Projects/e-commerce/src/store/index.js"],"sourcesContent":["import Vue from 'vue';\r\nimport Vuex from 'vuex'\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n    state: {\r\n        products: [],\r\n        product: null,\r\n        uniqueCategories: [],\r\n        productCategoriesTitle: [],\r\n        cart: [],\r\n    },\r\n    getters: {\r\n        getCategory: (state) => (category) => {\r\n            return state.products.filter(product => product.category === category)\r\n        },\r\n        specialProduct(state) {\r\n            return state.products.filter(product => product.special )\r\n        },\r\n        totalPrice(state) {\r\n            return state.cart.reduce((count, curItem) => {\r\n                return count + (curItem.quantity * curItem.price);\r\n            }, 0);\r\n        },\r\n    },\r\n    mutations: {\r\n        setProducts(state, products) {\r\n            state.products = products;\r\n        },\r\n        setProduct(state, product) {\r\n            state.product = product;\r\n        },\r\n        setCart(state,cart){\r\n            const cartItemIndex = state.cart.findIndex(item => item.id === cart.id);\r\n\r\n            if(cartItemIndex < 0) {\r\n                state.cart.push({...cart, quantity: 1});\r\n            } else {\r\n                if(state.cart[cartItemIndex].quantity === 10) return  0;\r\n                state.cart[cartItemIndex].quantity++;\r\n            }\r\n            localStorage.setItem('cart', JSON.stringify(state.cart));\r\n        },\r\n        incrementCartItemQuantity (state, id) {\r\n            const cartItemIndex =   state.cart.findIndex(item => item.id === id);\r\n            if(state.cart[cartItemIndex].quantity === 10) return 0;\r\n            state.cart[cartItemIndex].quantity++;\r\n        },\r\n        decrementCartItemQuantity (state, id) {\r\n            const cartItemIndex =   state.cart.findIndex(item => item.id === id);\r\n            if(state.cart[cartItemIndex].quantity === 1) return  0;\r\n            state.cart[cartItemIndex].quantity--;\r\n        },\r\n        removeCartProductItem(state,id){\r\n            state.cart = state.cart.filter(product=> product.id !== id);\r\n            localStorage.removeItem('cart');\r\n        },\r\n        initializeCart(state) {\r\n            // بازیابی اطلاعات سبد خرید از local storage در ابتدای بارگیری برنامه (اختیاری)\r\n            const savedCart = localStorage.getItem('cart');\r\n            if (savedCart) {\r\n                state.cart = JSON.parse(savedCart);\r\n            }\r\n        },\r\n        uniqueCategory: (state) => {\r\n          state.products.filter(element => {\r\n                const isDuplicate = state.uniqueCategories.includes(element.category);\r\n                if (!isDuplicate) {\r\n                    state.uniqueCategories.push(element.category);\r\n                    return true;\r\n                }\r\n                return false;\r\n            })\r\n        },\r\n    },\r\n    actions: {\r\n        async getProducts({commit}) {\r\n            const data = await fetch('http://localhost:3000/products');\r\n            let products = await data.json();\r\n            commit('setProducts', products);\r\n        },\r\n        async getProduct({commit}, id) {\r\n            const data = await fetch(`http://localhost:3000/products/${id}`);\r\n            let product = await data.json();\r\n            commit(\"setProduct\", product);\r\n        },\r\n        initializeCart({ commit }) {\r\n            commit('initializeCart');\r\n        }\r\n    },\r\n    modules: {}\r\n})\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}